import wollok.game.*
import tank.*
import enemigos.*
import balas.*
import paredes.*
import extras.*
import mapas.*

describe "Tanque" {

	method initialize() {
		game.clear()
		game.addVisual(tanque)
		game.addVisual(puntos)
	}

	test "Tanque con cinco vidas, recibe daño cuatro veces y queda con una vida" {
		tanque.recibirDanio()
		tanque.recibirDanio()
		tanque.recibirDanio()
		tanque.recibirDanio()
		assert.equals(1, tanque.vidasRestantes())
	}

	test "Tanque con cinco vidas desaparece del tablero" {
		tanque.recibirDanio()
		tanque.recibirDanio()
		tanque.recibirDanio()
		tanque.recibirDanio()
		tanque.recibirDanio()
		assert.notThat(game.hasVisual(tanque))
	}

}

describe "Enemigos" {

	method initialize() {
		game.clear()
		game.addVisual(puntos)
	}

	test "Tanque enemigo común con dos vidas, recibe un impacto y desaparece del mapa" {
		const enemigo = new Tanque()
		assert.equals(2, enemigo.vidasRestantes())
		enemigo.recibirDanio()
		assert.notThat(game.hasVisual(enemigo))
	}

	test "Tanque enemigo pesado con cuatro vidas, recibe tres impactos y desaparece del mapa" {
		const enemigo = new TanquePesado()
		assert.equals(4, enemigo.vidasRestantes())
		enemigo.recibirDanio()
		enemigo.recibirDanio()
		enemigo.recibirDanio()
		assert.notThat(game.hasVisual(enemigo))
	}

}

describe "Paredes" {

	method initialize() {
		game.clear()
		game.addVisual(puntos)
	}

	test "Pared de ladrillo desaparece luego de dos impactos" {
		const paredDeLadrillo = new ParedDeLadrillo()
		paredDeLadrillo.recibirDanio()
		paredDeLadrillo.recibirDanio()
		assert.notThat(game.hasVisual(paredDeLadrillo))
	}

}

describe "Civil" {

	method initialize() {
		game.clear()
		game.addVisual(puntos)
	}

	test "Civil desaparece del juego luego de un impacto" {
		const civil = new Civil()
		civil.recibirDanio()
		assert.notThat(game.hasVisual(civil))
	}

}

